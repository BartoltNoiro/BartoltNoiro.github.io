<html>
    <head>
      <script src= 
        "https://code.jquery.com/jquery-3.4.1.min.js"> 
    </script>
         <!-- The core Firebase JS SDK is always required and must be listed first -->
         <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
         <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-auth.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>  
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
          <style>
            .mepic > .mp4a{
                width:100px;
                float:left;
                height:auto;
                border-radius: 80%;
            }

            .others{
                    margin-left: 63%;
                }
              
            .name{
                font-family: poppins;
                font-weight: 500;

                margin-right: 30px;
                margin-left: 15px;
            }

            body{
                padding-top: 140px;
            }

            #move{
              width:640px;
              height:360px;
              margin: auto;
            }

            #main-container{
              
              background-color: #A8DADC;
            }


            .or{
              margin-left: 10%;
            }

            .intro{
              margin-left: 5%;
              padding-top: 20px;
              
            }

            .a-intro{
              margin-left: 5%;
              padding-bottom: 80px;
            }
            

            html,body {
              height: 100%;
            }

            #page-content {
              flex: 1 0 auto;
            }

            #sticky-footer {
              flex-shrink: none;
            }

            body {
              background: #457B9D;
            }

          </style>
    </head>
    <!--LOGIN-->
    <div class="container" id="container_login">
        <div class="row">
          <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
            <div class="card card-signin my-5">
              <div class="card-body">
                <h5 class="card-title text-center">Login</h5>
                <form class="form-signin">
                    <div class="form-label-group">
                      <input type="email" id="Uname" class="form-control" placeholder="Email address" required autofocus>
                      <label for="inputEmail">Email address</label>
                    </div>
                    <div class="form-label-group">
                      <input type="password" id="Pass" class="form-control" placeholder="Password" required>
                      <label for="inputPassword">Password</label>
                    </div>
                    <input type="button" name ="log" id ="log" class="btn btn-info" value="Sign in">
                    
                    <label for="sign in">Signing in may take a few seconds.</label>
                 </form>
              </div>
            </div>
          </div>
        </div>
      </div>


    <div id="main-body">
    <body>
        
        <nav class="navbar fixed-top navbar-expand-lg navbar-light scrolling-navbar" style="background-color: #F1FAEE;">
            <div class = "mepic">
              <video class="mp4a" playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
                <source src="https://thumbs.gfycat.com/HastyHardAdder-mobile.mp4" type="video/mp4" style="width: 100%;">
              </video>
            </div>

            <div class = "name">Raphael Torres</div>
          
            <div class="others" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#" id="home_nav">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" id="ed_nav">Educations</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" id="org_nav">Organizations</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" id="works_nav">Works</a>
                </li>
              </ul>
            </div>
          </nav>
          
      <main>
        <div class="container" id="main-container">
          <!--Carousel-->
          <div id="move" class="carousel slide" data-ride="carousel" data-interval="3000">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="viper.jpg" alt="First slide" id="paolo">
                <div class="carousel-caption">
                  <h3>"Welcome to My WOrlD!!"</h3>
                  <p>-Viper from Valorant</p>
                </div>
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="witcher.jpg" alt="Second slide" id="paolo">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="janken.jpg" alt="Third slide" id="paolo">
                <div class="carousel-caption">
                  <p>Jan Ken GUU!</p>
                </div>
              </div>
            </div>
          </div>
          <!--end carousel-->

            <!--INTRO--> 
            <div class="intro">
            <h3 id="intro">Short Introduction</h3>
<p class="a-intro" id="firebase-intro">  <!--where data for Intro go in-->
  
            <!--<figure class="figure"><img class="rounded img-fluid figure-img" src="highschool.jpg" alt="This is my face.." style="width: 320px;" style="height: 180px;">
                <figcaption class="figure-caption">Lorem ipsum dolor</figcaption>
            </figure>  not sure if i need it-->
          </div>
            
            <!--Educations-->
          <div class="post-body">
            <h4 id="ed_head">Educations</h4>  
            
            <div class="row">
                <div class="col-md-6">
                    <figure class="figure"><img class="rounded img-fluid figure-img" src="dlsu.jpg" alt="DLSU">
                        <figcaption class="figure-caption">De La Salle University</figcaption>
                    </figure>
                </div>
                <div class="col">
                  
                    <form id="add_education">    <!--adding education -->
                      <input type ="text" name="degree" placeholder="Degree name">
                      <input type ="text" name="school" placeholder="School name">
                      <input type ="text" name="year_start" placeholder="Year start">
                      <input type ="text" name="year_end" placeholder="Year end">
                      <!--<input type ="button" name="add_edu" id="add_edu" value="Add Education"> -->
                      <button type="submit" class="btn btn-info">Add Education</button>  
                    </form>
                  
                  <ul id="educate"></ul> <!--where data for Educations go in-->
                </div>
            </div>
            
            <!--Organizations-->
            <h4 id="org_head">Organizations</h4>
            <p>Before the Quarantine, the main org that I was in was batchgov CATCH2T21. I was in documents and logistics, handling papers and such. </p>
            <div class="row"> 
                <div class="col">
                   <form id="add_organization">   <!--adding organization -->
                    <input type ="text" name="name" placeholder="Org name">
                    <input type ="text" name="position" placeholder="Position">
                    <input type ="text" name="year_start" placeholder="Year start">
                    <input type ="text" name="year_end" placeholder="Year end">
                    <button type="submit" class="btn btn-info">Add Organization</button>
                  </form>
                  <ul id="orgs"></ul> <!--where data for Organizations go in-->
                </div>
                <div class="col-md-6">
                    <figure class="figure"><img class="rounded img-fluid figure-img" src="CATCH2T21_post_stamp.PNG" alt="CATCH2T21 logo" style="width: 180px;" style="height: 180px;">
                        <figcaption class="figure-caption">CATCH2T21 logo</figcaption>
                    </figure>
                </div>
            </div>  

            <!--Works-->
            <h4 id="works_head">Works</h4>
            <form id="add_work">   <!--adding works -->
              <input type ="text" name="lab" placeholder="Programming Language">
              <input type ="text" name="name" placeholder="Name of Work">
              <input type ="text" name="year_end" placeholder="Year of Release">
              <button type="submit" class="btn btn-info">Add Works</button>
            </form>
            <ul id="workwork"></ul>
            <figure class="figure"><img class="rounded img-fluid figure-img" src="witcher.jpg" alt="A generic square placeholder image with rounded corners in a figure.">
              <figcaption class="figure-caption">joke lang I'm not a developer of witcher...</figcaption>
          </figure>
        </div>
        </ul>
        </div>
      </main>


      <!-- Footer -->
      <body class="d-flex flex-column">
        <footer id="sticky-footer" class="py-4 bg-dark text-white-50">
          <div class="container text-center">
            <p class="lead text-white-50">Contact Links</p>
            <small><a href="https://twitter.com/BartoltNoiro"><img id = "twitter" src="twitter.png" alt="Twitter" width="30px" ></a></small>
            <small><a href="https://www.linkedin.com/in/raphael-torres-695a5a1b4/"><img id = "linkedin" src="linkedin.png" alt="linkedin" width="30px" ></a></small>
            <small><a href="https://github.com/BartoltNoiro"><img id = "github" src="github.png" alt="Github" width="30px" ></a></small>
          </div>
        </footer>
      </body>
    </body>
</div>
</html>

<script>
  //for the scroll 
  $("#home_nav").click(function () {
    var target = $("#intro");
    $("html, body").animate( 
      { scrollTop: target.offset().top -580}, 'slow'); 
  });

  $("#ed_nav").click(function () {
    var target = $("#ed_head");
    $("html, body").animate( 
      { scrollTop: target.offset().top -150}, 'slow'); 
  });

  $("#org_nav").click(function () {
    var target = $("#org_head");
    $("html, body").animate( 
      { scrollTop: target.offset().top -100}, 'slow'); 
  });

  $("#works_nav").click(function () {
    var target = $("#works_head");
    $("html, body").animate( 
      { scrollTop: target.offset().top -90}, 'slow'); 
  });

  //Your web app's Firebase configuration
  var firebaseConfig = {
            apiKey: "AIzaSyDM6Mlnj3z2T4IhXi5ZUQm17TvJItbwOqI",
            authDomain: "ccapdev-resume-7b975.firebaseapp.com",
            databaseURL: "https://ccapdev-resume-7b975.firebaseio.com",
            projectId: "ccapdev-resume-7b975",
            storageBucket: "ccapdev-resume-7b975.appspot.com",
            messagingSenderId: "818994617115",
            appId: "1:818994617115:web:e64bb5eac42dfdea5ed1be"
    };
        // Initialize Firebase
        var defaultProject = firebase.initializeApp(firebaseConfig);

        var db = firebase.firestore()  

  $(document).ready(function(){

    //login hidden
    var x = document.getElementById("main-body");
    var y = document.getElementById("container_login")
    x.style.visibility = 'hidden';

    //login
    $("#log").click(function(){
      var email = $("#Uname").val();
      var password = $("#Pass").val();

      firebase.auth().signInWithEmailAndPassword(email,password).then(function(user){
      console.log("user signed in");
      x.style.visibility = 'visible';
      y.style.visibility = 'hidden';

      }).catch(function(err){
        if(err.code == "auth/wrong-password"){
          alert("wrong password")
        }else{
          alert(err.message);
        }
      });
    })  //log in

    //EDUCATION
    const education = document.querySelector("#educate");
    const add_ed = document.querySelector("#add_education");

    //adding
    add_ed.addEventListener('submit', (e) => {
      e.preventDefault();
      db.collection('educations').add({
        degree: add_ed.degree.value,
        school: add_ed.school.value,
        year_start: add_ed.year_start.value,
        year_end: add_ed.year_end.value

      });
      //resetting the input text
      add_ed.degree.value = '';
      add_ed.school.value = '';
      add_ed.year_start.value='';
      add_ed.year_end.value='';

      call_ed();   //recalling function to update changes
    })
      

//create  element and render EDUCATIONS 
    function renderEdu(doc){      
      let li = document.createElement('li');
      let degree = document.createElement('span');
      let school = document.createElement('span');
      let year_end = document.createElement('span');
      let year_start = document.createElement('span');
      let cross = document.createElement('button');

      li.setAttribute('data-id', doc.id);
      degree.textContent = doc.data().degree + " ";
      school.textContent = doc.data().school+ " ";
      year_start.textContent = doc.data().year_start+ "-";
      year_end.textContent = doc.data().year_end+ " ";
      cross.textContent = 'X';

      li.appendChild(degree);
      li.appendChild(school);
      li.appendChild(year_start);
      li.appendChild(year_end);
      li.appendChild(cross);

      education.appendChild(li);

      //deleting data
      cross.addEventListener('click', (e) => {
        e.stopPropagation();
        let id = e.target.parentElement.getAttribute('data-id');
        db.collection('educations').doc(id).delete();
        li.remove();
      })
    }

  
    function call_ed(){
      education.innerHTML=""; //to not restack and display same copy
      db.collection('educations').get().then((snapshot) => {
        snapshot.docs.forEach(doc => {
          renderEdu(doc);
        })
      })
    }
    call_ed(); //end of EDUCATION

    // ORGANIZATION
    const organization = document.querySelector("#orgs");
    const add_org = document.querySelector("#add_organization");

    //adding
    add_org.addEventListener('submit', (e) => {
      e.preventDefault();
      db.collection('organizations').add({
        name: add_org.name.value,
        position: add_org.position.value,
        year_start: add_org.year_start.value,
        year_end: add_org.year_end.value

      });
      //resetting the input text
      add_org.name.value = '';
      add_org.position.value = '';
      add_org.year_start.value='';
      add_org.year_end.value='';

      call_org();   //recalling function to update changes
  })

    function renderOrgs(doc){
      let li = document.createElement('li');
      let name = document.createElement('span');
      let position = document.createElement('span');
      let year_end = document.createElement('span');
      let year_start = document.createElement('span');
      let cross = document.createElement('button');

      li.setAttribute('data-id', doc.id);
      name.textContent = doc.data().name + " ";
      position.textContent = doc.data().position+ " ";
      year_start.textContent = doc.data().year_start+ "-";
      year_end.textContent = doc.data().year_end+ " ";
      cross.textContent = 'X';

      li.appendChild(name);
      li.appendChild(position);
      li.appendChild(year_start);
      li.appendChild(year_end);
      li.appendChild(cross);
     
      organization.appendChild(li);

      //deleting data
      cross.addEventListener('click', (e) => {
        e.stopPropagation();
        let id = e.target.parentElement.getAttribute('data-id');
        db.collection('organizations').doc(id).delete();
        li.remove();
      })
  }

  function call_org(){
    organization.innerHTML="";
    db.collection('organizations').get().then((snapshot) => {
      snapshot.docs.forEach(doc => {
        renderOrgs(doc);
      })
    })
  }
  call_org(); //end of ORGANIZATION

  //WORKS
  const workproduct = document.querySelector("#workwork");
  const add_works = document.querySelector("#add_work");

  //adding
  add_works.addEventListener('submit', (e) => {
      e.preventDefault();
      db.collection('works').add({
        lab: add_works.lab.value,
        name: add_works.name.value,
        year_end: add_works.year_end.value

      });
      //resetting the input text
      add_works.lab.value = '';
      add_works.name.value = '';
      add_works.year_end.value='';

      call_work();   //recalling function to update changes
  })

  function renderWorks(doc){
    let li = document.createElement('li');
    
    let name = document.createElement('span');
    let lab = document.createElement('span');
    let year_end = document.createElement('span');
    let cross = document.createElement('button');

    li.setAttribute('data-id', doc.id);
    lab.textContent = doc.data().lab + " ";
    name.textContent = doc.data().name+ " ";
    year_end.textContent = doc.data().year_end+ " ";
    cross.textContent = 'X';

    li.appendChild(lab);
    li.appendChild(name);
    li.appendChild(year_end);
    li.appendChild(cross);
    
    workproduct.appendChild(li);

    //deleting data
    cross.addEventListener('click', (e) => {
        e.stopPropagation();
        let id = e.target.parentElement.getAttribute('data-id');
        db.collection('works').doc(id).delete();
        li.remove();
      })
  }

  function call_work(){
    workproduct.innerHTML=""
    db.collection('works').get().then((snapshot) => {
      snapshot.docs.forEach(doc => {
        renderWorks(doc);
      })
    })
  }
  call_work(); //end of WORK


  //introduction

  const introduce = document.querySelector("#firebase-intro");

  function renderIntro(doc){
    let d_intro = document.createElement('span');
    
    d_intro.textContent = doc.data().value;
    
    introduce.appendChild(d_intro);
  }

  function call_intro(){
    db.collection('others').get().then((snapshot) => {
    snapshot.docs.forEach(doc => {
      renderIntro(doc);
    })
  })
  }

  call_intro(); //end of INTRO
  
}); //doc READY end

</script>  